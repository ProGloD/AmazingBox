{"version":3,"sources":["store/authToken.js","store/path.js","store/favoriteStore.js","utils.js","components/Login.js","components/Logout.js","components/PopUp.js","components/ItemMenu.js","components/Item.js","components/ItemList.js","components/Path.js","components/AddItem.js","components/Home.js","components/Search.js","components/SearchView.js","components/Favorites.js","components/LoginDone.js","App.js","serviceWorker.js","index.js"],"names":["token$","BehaviorSubject","window","localStorage","getItem","updateToken","newToken","setItem","removeItem","next","path$","favorite$","JSON","parse","updateFavorite","newFavorite","stringify","logout","Dropbox","fetch","accessToken","value","authTokenRevoke","then","_","catch","error","console","log","getFiles","cb","path","location","pathname","filesListFolder","response","entries","fileUpload","file","slice","filesUpload","concat","name","contents","autorename","search","query","filesSearch","result","matches","map","element","push","metadata","move","from_path","to_path","filesMove","favorites","Object","toConsumableArray","idx","id","splice","Login","react_default","a","createElement","react_router","to","auth","clientId","getAuthenticationUrl","className","Helmet","src","width","alt","href","Logout","onClick","PopUp","props","updateFiles","_useState","useState","_useState2","slicedToArray","updateName","_useState3","_useState4","folders","updateFolders","showState","_useState5","_useState6","errorMsg","updateErrorMsg","closePop","sendId","onSubmit","event","preventDefault","path_lower","split","pop","submitRename","join","style","color","onChange","target","placeholder","type","folder","key","arr","path_display","length","Fragment","checkPath","recursive","files","filter","sort","b","localeCompare","filepath","filesDelete","remove","filesCopy","copyTarget","ItemMenu","upDateId","showPop","updateShowPop","components_PopUp","Item","timestamp","favorite","updateUserFavorite","showMenu","updateShowMenu","image","updateImage","useEffect","subscription","subscribe","fileName","names","format","checkIfImage","img","filesGetThumbnail","URL","createObjectURL","fileBlob","unsubscribe","find","x","react_router_dom","server_modified","Date","toLocaleString","bytes","sizes","i","parseInt","Math","floor","pow","toFixed","bytesToSize","size","filesGetTemporaryLink","link","components_ItemMenu","ItemList","cellSpacing","cellPadding","components_Item","Path","index","way","reducer","state","action","objectSpread","showCreateFolder","inputValue","AddFileButton","_useReducer","useReducer","_useReducer2","dispatch","spellCheck","e","required","filesCreateFolder","createFolder","multiple","_i","_array","Array","from","htmlFor","Home","userToken","updateUserToken","callback","newPath","subscriptionToken","token","interval","setInterval","clearInterval","components_Path","components_ItemList","AddItem","Search","updateQuery","_useDebounce","useDebounce","SearchView","components_Search","Favorites","LoginDone","update","str","ret","create","trim","replace","forEach","param","parts","shift","val","undefined","decodeURIComponent","isArray","parseQueryString","hash","access_token","App","basename","process","components_Logout","exact","component","Boolean","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.07ae70da.chunk.js","sourcesContent":["import { BehaviorSubject } from \"rxjs\";\r\n\r\nexport const token$ = new BehaviorSubject(\r\n  window.localStorage.getItem(\"token\") || null\r\n);\r\n\r\nexport function updateToken(newToken) {\r\n  if (!newToken) {\r\n    window.localStorage.removeItem(\"token\");\r\n  } else {\r\n    window.localStorage.setItem(\"token\", newToken);\r\n  }\r\n\r\n  token$.next(newToken);\r\n}\r\n","import { BehaviorSubject } from \"rxjs\";\r\n\r\nexport const path$ = new BehaviorSubject(\r\n  window.localStorage.getItem(\"path\") || \"\"\r\n);\r\n\r\nexport function updatePath(newPath) {\r\n  if (!newPath) {\r\n    window.localStorage.removeItem(\"path\");\r\n  } else {\r\n    window.localStorage.setItem(\"path\", newPath);\r\n  }\r\n\r\n  path$.next(newPath);\r\n}\r\n","import { BehaviorSubject } from \"rxjs\";\r\n\r\nexport const favorite$ = new BehaviorSubject(\r\n  JSON.parse(window.localStorage.getItem(\"favorite\") || \"[]\")\r\n);\r\n\r\nexport function updateFavorite(newFavorite) {\r\n  if (!newFavorite) {\r\n    window.localStorage.removeItem(\"favorite\");\r\n  } else {\r\n    window.localStorage.setItem(\"favorite\", JSON.stringify(newFavorite));\r\n  }\r\n\r\n  favorite$.next(newFavorite);\r\n}\r\n","import React from \"react\";\r\nimport Dropbox from \"dropbox\";\r\nimport fetch from \"isomorphic-fetch\";\r\nimport { token$, updateToken } from \"./store/authToken\";\r\nimport { path$ } from \"./store/path\";\r\nimport { favorite$, updateFavorite } from \"./store/favoriteStore\";\r\n\r\nexport function login() {\r\n  let key = \"kvms35pmp4vwz5n\";\r\n  return new Dropbox.Dropbox({\r\n    fetch,\r\n    clientId: key\r\n  }).getAuthenticationUrl(\"https://proglod.github.io/AmazingBox/auth-done\");\r\n}\r\n\r\nexport function logout() {\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .authTokenRevoke()\r\n    .then(_ => updateToken(null))\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function getFiles(cb) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesListFolder({ path: path$.value })\r\n    .then(response => {\r\n      if (path === window.location.pathname) {\r\n        cb(response.entries);\r\n      }\r\n    })\r\n    .catch(_ => updateToken(null));\r\n}\r\n\r\nexport function getAllFiles(updateFiles) {\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesListFolder({ path: \"\", recursive: true })\r\n    .then(response => {\r\n      let files = response.entries;\r\n      updateFiles(\r\n        files\r\n          .filter(element => element[\".tag\"] === \"folder\")\r\n          .sort((a, b) => a.path_lower.localeCompare(b.path_lower))\r\n      );\r\n    })\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function createFolder(name, cb) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesCreateFolder({\r\n      path: `${path$.value}/${name}`,\r\n      autorename: true\r\n    })\r\n    .then(_ => {\r\n      if (path === path$.value) {\r\n        getFiles(cb);\r\n      }\r\n    })\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function fileUpload(file, cb) {\r\n  let path =\r\n    window.location.pathname === \"/\" ? \"\" : window.location.pathname.slice(5);\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesUpload({\r\n      path: `${path$.value}/${file.name}`,\r\n      contents: file,\r\n      autorename: true\r\n    })\r\n    .then(_ => {\r\n      if (path === path$.value) {\r\n        getFiles(cb);\r\n      }\r\n    })\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function search(cb, query) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx.filesSearch({ path: \"\", query }).then(response => {\r\n    if (path === window.location.pathname) {\r\n      const result = [];\r\n\r\n      response.matches.map(element => result.push(element.metadata));\r\n      cb(result);\r\n    }\r\n  });\r\n}\r\n\r\nexport function remove(filepath, cb) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesDelete({ path: filepath })\r\n    .then(_ => {\r\n      if (path !== \"/search\" && path !== \"/favorites\") {\r\n        getFiles(cb);\r\n      }\r\n\r\n      let favorites = [...favorite$.value];\r\n      favorites.map((file, idx) => {\r\n        if (file.path_lower === filepath) {\r\n          favorites.splice(idx, 1);\r\n          updateFavorite(favorites);\r\n        }\r\n      });\r\n    })\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function getThumbnail(cb, path) {\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesGetThumbnail({ path })\r\n    .then(response => {\r\n      cb(\r\n        <img\r\n          className=\"thumbnail\"\r\n          src={window.URL.createObjectURL(response.fileBlob)}\r\n          alt=\"\"\r\n        />\r\n      );\r\n    })\r\n    .catch(_ => {\r\n      cb(\"photo\");\r\n    });\r\n}\r\n\r\nexport function submitRename(from_path, to_path, cb, errorMsg) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n\r\n  dbx\r\n    .filesMove({ from_path, to_path })\r\n    .then(response => {\r\n      if (path !== \"/search\" && path !== \"/favorites\") {\r\n        getFiles(cb);\r\n      }\r\n\r\n      let favorites = [...favorite$.value];\r\n      favorites.map((file, idx) => {\r\n        if (file.id === response.id) {\r\n          favorites.splice(idx, 1, response);\r\n          updateFavorite(favorites);\r\n        }\r\n      });\r\n    })\r\n    .catch(function(error) {\r\n      errorMsg(error);\r\n    });\r\n}\r\n\r\nexport function copyTarget(from_path, to_path, cb) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx.filesCopy({ from_path, to_path, autorename: true }).then(response => {\r\n    if (path !== \"/search\" && path !== \"/favorites\") {\r\n      getFiles(cb);\r\n    }\r\n  });\r\n}\r\n\r\nexport function download(path) {\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesGetTemporaryLink({ path })\r\n    .then(response => {\r\n      window.location.href = response.link;\r\n    })\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function move(from_path, to_path, cb) {\r\n  let path = window.location.pathname;\r\n\r\n  let dbx = new Dropbox.Dropbox({ fetch, accessToken: token$.value });\r\n  dbx\r\n    .filesMove({ from_path, to_path, autorename: true })\r\n    .then(response => {\r\n      if (path !== \"/search\" && path !== \"/favorites\") {\r\n        getFiles(cb);\r\n      }\r\n\r\n      let favorites = [...favorite$.value];\r\n      favorites.map((file, idx) => {\r\n        if (file.id === response.id) {\r\n          favorites.splice(idx, 1, response);\r\n          updateFavorite(favorites);\r\n        }\r\n      });\r\n    })\r\n    .catch(error => console.log(error));\r\n}\r\n\r\nexport function parseQueryString(str) {\r\n  var ret = Object.create(null);\r\n\r\n  if (typeof str !== \"string\") {\r\n    return ret;\r\n  }\r\n\r\n  str = str.trim().replace(/^(\\?|#|&)/, \"\");\r\n\r\n  if (!str) {\r\n    return ret;\r\n  }\r\n\r\n  str.split(\"&\").forEach(function(param) {\r\n    var parts = param.replace(/\\+/g, \" \").split(\"=\");\r\n    // Firefox (pre 40) decodes `%3D` to `=`\r\n    // https://github.com/sindresorhus/query-string/pull/37\r\n    var key = parts.shift();\r\n    var val = parts.length > 0 ? parts.join(\"=\") : undefined;\r\n\r\n    key = decodeURIComponent(key);\r\n\r\n    // missing `=` should be `null`:\r\n    // http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\r\n    val = val === undefined ? null : decodeURIComponent(val);\r\n\r\n    if (ret[key] === undefined) {\r\n      ret[key] = val;\r\n    } else if (Array.isArray(ret[key])) {\r\n      ret[key].push(val);\r\n    } else {\r\n      ret[key] = [ret[key], val];\r\n    }\r\n  });\r\n\r\n  return ret;\r\n}\r\n\r\nexport function getTime(timestamp) {\r\n  return new Date(timestamp).toLocaleString(\"sv-SE\");\r\n}\r\n\r\nexport function bytesToSize(bytes) {\r\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\r\n  if (bytes === 0) return \"n/a\";\r\n  const i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)), 10);\r\n  if (i === 0) return `${bytes} ${sizes[i]}`;\r\n  return `${(bytes / 1024 ** i).toFixed(1)} ${sizes[i]}`;\r\n}\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport { login } from \"../utils\";\r\nimport { token$ } from \"../store/authToken\";\r\nimport \"../css/login.css\";\r\n\r\nfunction Login() {\r\n  if (token$.value) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  let auth = login();\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <Helmet>\r\n        <title>Login</title>\r\n      </Helmet>\r\n      <img\r\n        src=\"https://www.mktv.mx/wp-content/uploads/2017/07/letter_sending.gif\"\r\n        width={400}\r\n        alt=\"Dropbox Logo\"\r\n      />\r\n      <a href={auth} className=\"login_link\">\r\n        <button className=\"login_link_button\">Login using Dropbox </button>\r\n      </a>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from \"react\";\r\n\r\nimport { logout } from \"../utils\";\r\n\r\nfunction Logout() {\r\n  return (\r\n    <button className=\"logout-button\" onClick={logout}>\r\n      Log out\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Logout;\r\n","import React, { useState } from \"react\";\r\n\r\nimport { remove, getAllFiles, move, submitRename, copyTarget } from \"../utils\";\r\nimport \"../css/menuPopUp.css\";\r\n\r\nfunction PopUp(props) {\r\n  const [name, updateName] = useState(props.file.name);\r\n  const [folders, updateFolders] = useState(null);\r\n  const { file, cb, showState } = props;\r\n  const [errorMsg, updateErrorMsg] = useState(\"\");\r\n\r\n  function closePop() {\r\n    //stäner popup-rutan när kommandot är klart\r\n    showState(false);\r\n  }\r\n\r\n  function rename(event) {\r\n    //sparar värdet från inputet för rename\r\n    updateName(event.target.value);\r\n  }\r\n\r\n  function checkPath(folder) {\r\n    //förfinar displayen av alla move-alternativen, behövs ens denna längre?\r\n    let arr = folder.path_display.split(\"/\");\r\n    arr.pop();\r\n\r\n    if (arr.length === 1) {\r\n      return (\r\n        <>\r\n          <p className=\"move-filePathLower\">/</p>\r\n          <p className=\"move-fileName\">{folder.name}</p>\r\n        </>\r\n      );\r\n    } else {\r\n      return (\r\n        <>\r\n          <p className=\"move-filePathLower\">{`${arr.join(\"/\")}/`}</p>\r\n          <p className=\"move-fileName\">{folder.name}</p>\r\n        </>\r\n      );\r\n    }\r\n  }\r\n\r\n  if (props.sendId === \"rename\") {\r\n    return (\r\n      <div className=\"popUp\">\r\n        <div className=\"popUp-content\">\r\n          <button onClick={closePop} className=\"popUp-content-btn\">\r\n            &times;\r\n          </button>\r\n          <form\r\n            onSubmit={event => {\r\n              event.preventDefault();\r\n              let path = file.path_lower.split(\"/\");\r\n              path.pop();\r\n              submitRename(\r\n                file.path_lower,\r\n                `${path.join(\"/\")}/${name}`,\r\n                cb,\r\n                updateErrorMsg\r\n              );\r\n              closePop();\r\n            }}\r\n            className=\"popUp-content-box\"\r\n          >\r\n            {errorMsg ? (\r\n              <p style={{ color: \"red\" }}>Filename has already been taken</p>\r\n            ) : (\r\n              <p>Rename item</p>\r\n            )}\r\n            <p>{file.name}</p>\r\n            <input onChange={rename} placeholder=\"New name\" />\r\n            <button type=\"submit\">Ok</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else if (props.sendId === \"move\") {\r\n    return (\r\n      <div className=\"popUp\">\r\n        <div className=\"popUp-content\">\r\n          <button onClick={closePop} className=\"popUp-content-btn\">\r\n            &times;\r\n          </button>\r\n          <div className=\"popUp-content-box move-div\">\r\n            <h4>{file.name}</h4>\r\n            <p>Select where to move item</p>\r\n            <ul className=\"move-ul\">\r\n              <li\r\n                className=\"move-li move-fileName\"\r\n                onClick={() => move(file.path_lower, `/${file.name}`, cb)}\r\n              >\r\n                AmazingBox\r\n              </li>\r\n              {!folders\r\n                ? getAllFiles(updateFolders)\r\n                : folders.map(folder => {\r\n                    return file.name === folder.name ? null : (\r\n                      <li\r\n                        className=\"move-li\"\r\n                        key={folder.id}\r\n                        onClick={() =>\r\n                          move(\r\n                            file.path_lower,\r\n                            `${folder.path_lower}/${file.name}`,\r\n                            cb\r\n                          )\r\n                        }\r\n                      >\r\n                        {checkPath(folder)}\r\n                      </li>\r\n                    );\r\n                  })}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else if (props.sendId === \"remove\") {\r\n    return (\r\n      <div className=\"popUp\">\r\n        <div className=\"popUp-content\">\r\n          <button onClick={closePop} className=\"popUp-content-btn\">\r\n            &times;\r\n          </button>\r\n          <div className=\"popUp-content-box\">\r\n            <p>Are you sure you wanna delete this item?</p>\r\n            <button onClick={() => remove(file.path_lower, cb)}>Yes</button>\r\n            <button onClick={closePop}>Cancel</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } else if (props.sendId === \"copy\") {\r\n    return (\r\n      <div className=\"popUp\">\r\n        <div className=\"popUp-content\">\r\n          <button onClick={closePop} className=\"popUp-content-btn\">\r\n            &times;\r\n          </button>\r\n          <div className=\"popUp-content-box\">\r\n            <p>Are you sure you wanna copy this item?</p>\r\n            <form\r\n              onSubmit={event => {\r\n                event.preventDefault();\r\n                copyTarget(file.path_lower, file.path_lower, cb);\r\n                closePop();\r\n              }}\r\n            >\r\n              <span>\r\n                <button className=\"copyButtons\" type=\"submit\">\r\n                  Copy\r\n                </button>\r\n              </span>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PopUp;\r\n","import React, { useState } from \"react\";\r\n\r\nimport PopUp from \"./PopUp\";\r\nimport \"../css/itemMenu.css\";\r\n\r\nfunction ItemMenu(props) {\r\n  const [id, upDateId] = useState(\"\"); //skickar med id:et för den knappen du tryckt på nere på rad 23ish\r\n  const [showPop, updateShowPop] = useState(false);\r\n\r\n  function onClick(event) {\r\n    upDateId(event.target.id);\r\n    !showPop ? updateShowPop(true) : updateShowPop(false); //function som ändrar state för en popup-ruta\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"itemMenu\">\r\n        <button\r\n          onClick={onClick}\r\n          className=\"itemMenu-button openfirst\"\r\n          id=\"rename\"\r\n        >\r\n          Rename\r\n        </button>\r\n        <button\r\n          onClick={onClick}\r\n          className=\"itemMenu-button opensecond\"\r\n          id=\"move\"\r\n        >\r\n          Move\r\n        </button>\r\n        <button\r\n          onClick={onClick}\r\n          className=\"itemMenu-button openthird\"\r\n          id=\"remove\"\r\n        >\r\n          Remove\r\n        </button>\r\n        <button\r\n          onClick={onClick}\r\n          className=\"itemMenu-button openfourth\"\r\n          id=\"copy\"\r\n        >\r\n          Copy\r\n        </button>\r\n      </div>\r\n      {showPop ? (\r\n        <PopUp\r\n          className=\"showPop\"\r\n          file={props.file}\r\n          cb={props.cb}\r\n          showState={updateShowPop}\r\n          sendId={id}\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ItemMenu;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport ItemMenu from \"./ItemMenu\";\r\nimport { favorite$, updateFavorite } from \"../store/favoriteStore\";\r\nimport { getTime, bytesToSize, getThumbnail, download } from \"../utils\";\r\n\r\nfunction Item(props) {\r\n  const [favorite, updateUserFavorite] = useState(favorite$.value);\r\n  const [showMenu, updateShowMenu] = useState(false);\r\n  const [image, updateImage] = useState(\"\");\r\n  const file = props.file;\r\n  const type = file[\".tag\"];\r\n\r\n  useEffect(() => {\r\n    //här håller useEffect koll på våra filer. Den koller vilken sorts fil det är.\r\n    let subscription = favorite$.subscribe(favorite => {\r\n      updateUserFavorite(favorite);\r\n    });\r\n\r\n    if (checkIfImage(file.name)) {\r\n      getThumbnail(img => updateImage(img), file.path_lower);\r\n    } else if (type === \"folder\") updateImage(\"folder\");\r\n    else {\r\n      updateImage(\"insert_drive_file\");\r\n    }\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, [file]);\r\n\r\n  function checkIfImage(fileName) {\r\n    //function för att kolla fil-typ\r\n    let names = fileName.split(\".\");\r\n    let format = names[names.length - 1];\r\n    if (\r\n      format === \"png\" ||\r\n      format === \"jpg\" ||\r\n      format === \"jpeg\" ||\r\n      format === \"tiff\" ||\r\n      format === \"tif\" ||\r\n      format === \"gif\" ||\r\n      format === \"bmp\"\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function addFavorite() {\r\n    let newFavorite = [...favorite];\r\n\r\n    if (newFavorite.find(x => x.id === file.id)) {\r\n      newFavorite = newFavorite.filter(x => x.id !== file.id);\r\n    } else {\r\n      newFavorite.push(file);\r\n    }\r\n\r\n    updateFavorite(newFavorite);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <td>\r\n        <button\r\n          className=\"favorite-Button material-icons\"\r\n          onClick={addFavorite}\r\n        >\r\n          {favorite && favorite.find(x => x.id === file.id)\r\n            ? \"star\"\r\n            : \"star_border\"}\r\n        </button>\r\n      </td>\r\n      <td className=\"td-type material-icons\">{image}</td>\r\n      <td className=\"td-name\">\r\n        {type === \"folder\" ? (\r\n          <Link to={`/home${file.path_display}`}>{file.name}</Link>\r\n        ) : (\r\n          file.name\r\n        )}\r\n      </td>\r\n      <td className=\"td-lastUpdate\">\r\n        {type !== \"folder\" ? getTime(file.server_modified) : null}\r\n      </td>\r\n      <td className=\"td-size\">\r\n        {type !== \"folder\" ? bytesToSize(file.size) : null}\r\n      </td>\r\n      <td className=\"td-download material-icons\">\r\n        {type === \"file\" ? (\r\n          <span onClick={() => download(file.path_lower)}>cloud_download</span>\r\n        ) : null}\r\n      </td>\r\n      <td className=\"td-menuButton\">\r\n        <button\r\n          onClick={() =>\r\n            !showMenu ? updateShowMenu(true) : updateShowMenu(false)\r\n          }\r\n          className=\"td-menuButton material-icons\"\r\n        >\r\n          more_horiz\r\n        </button>\r\n      </td>\r\n      <td className=\"td-menu\">\r\n        {showMenu ? <ItemMenu file={file} cb={props.cb} /> : null}\r\n      </td>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Item;\r\n","import React from \"react\";\r\nimport Item from \"./Item\";\r\n\r\nfunction ItemList(props) {\r\n  const { files, cb } = props;\r\n\r\n  return (\r\n    <div className=\"ItemList\">\r\n      <table className=\"item-table\" cellSpacing=\"0\" cellPadding=\"0\">\r\n        <thead>\r\n          <tr className=\"head-row\">\r\n            <th className=\"th-empty\" />\r\n            <th className=\"th-type\">Type</th>\r\n            <th className=\"th-name\">Name</th>\r\n            <th className=\"th-lastUpdate\">Last Updated</th>\r\n            <th className=\"th-size\">Size</th>\r\n            <th className=\"th-empty2\" />\r\n            <th className=\"th-empty3\" />\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {files.map(file => (\r\n            <tr className=\"file-row\" key={file.path_lower}>\r\n              <Item file={file} cb={cb} />\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ItemList;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { path$ } from \"../store/path\";\r\nimport \"../css/Path.css\";\r\n\r\nfunction Path() {\r\n  const path = path$.value.split(\"/\");\r\n\r\n  return (\r\n    <div className=\"path-list\">\r\n      {path.map((element, index) => {\r\n        const way = path.slice(0, index + 1).join(\"/\");\r\n\r\n        if (!way) {\r\n          return (\r\n            <Link key={way} to=\"/\">\r\n              > amazingbox\r\n            </Link>\r\n          );\r\n        } else {\r\n          return (\r\n            <Link key={way} to={`/home${way}`}>\r\n              {\" \"}\r\n              &gt; {element}\r\n            </Link>\r\n          );\r\n        }\r\n      })}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Path;\r\n","import React, { useReducer } from \"react\";\r\nimport { fileUpload, createFolder } from \"../utils\";\r\nimport \"../css/menuPopUp.css\";\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case \"showMenu\": //toggle addMenu\r\n      return {\r\n        ...state,\r\n        showMenu: !state.showMenu ? true : false,\r\n        showCreateFolder: false,\r\n        inputValue: \"\"\r\n      };\r\n\r\n    case \"show_create_folder\": //show input for adding folder\r\n      console.log(state);\r\n      return {\r\n        ...state,\r\n        showCreateFolder: true\r\n      };\r\n\r\n    case \"cancel_folder\": //cancle input for folder\r\n      return {\r\n        ...state,\r\n        showCreateFolder: false,\r\n        inputValue: \"\"\r\n      };\r\n\r\n    default:\r\n      console.log(\"ITS BROKEN!\");\r\n      return;\r\n  }\r\n}\r\n\r\nfunction AddFileButton(props) {\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    showMenu: false,\r\n    showCreateFolder: false,\r\n    inputValue: \"\"\r\n  });\r\n  const { cb } = props;\r\n\r\n  function onFileChange(event) {\r\n    let array = Array.from(event.target.files);\r\n    for (let file of array) {\r\n      fileUpload(file, cb);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"add-menuContainer\">\r\n      {state.showCreateFolder ? (\r\n        <div className=\"popUp\">\r\n          <div className=\"popUp-inputfield modal__shadow__container\">\r\n            <input\r\n              className=\"modal__shadow__input\"\r\n              type=\"text\"\r\n              spellCheck=\"false\"\r\n              onChange={e => (state.inputValue = e.target.value)}\r\n              required\r\n            />\r\n            <span className=\"modal__shadow__container__buttonBox\">\r\n              <button\r\n                className=\"modal__shadow__container__buttonBox__button\"\r\n                onClick={() => {\r\n                  createFolder(state.inputValue, cb);\r\n                  dispatch({ type: \"cancel_folder\" });\r\n                }}\r\n              >\r\n                Create\r\n              </button>\r\n              <button\r\n                className=\"modal__shadow__container__buttonBox__button\"\r\n                onClick={() => dispatch({ type: \"cancel_folder\" })}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      ) : null}\r\n\r\n      {state.showMenu ? (\r\n        <div className=\"add-popupMenu\">\r\n          <input\r\n            className=\"add-fileButton material-icons\"\r\n            type=\"file\"\r\n            multiple\r\n            onChange={onFileChange}\r\n          />\r\n          <label\r\n            className=\"custom-file-label material-icons opensecond\"\r\n            htmlFor=\"inputGroupFile01\"\r\n          >\r\n            insert_drive_file\r\n          </label>\r\n          <button\r\n            className=\"add-folderButton material-icons opensecond\"\r\n            onClick={() => dispatch({ type: \"show_create_folder\" })}\r\n          >\r\n            create_new_folder\r\n          </button>\r\n        </div>\r\n      ) : null}\r\n      <button\r\n        className=\"add-button add-icon material-icons\"\r\n        onClick={() => dispatch({ type: \"showMenu\" })}\r\n      >\r\n        add_circle_outline\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\nexport default AddFileButton;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport ItemList from \"./ItemList\";\r\nimport Path from \"./Path\";\r\nimport AddItem from \"./AddItem\";\r\nimport { getFiles } from \"../utils\";\r\nimport { updatePath } from \"../store/path\";\r\nimport { token$ } from \"../store/authToken\";\r\n\r\nfunction Home(props) {\r\n  const [userToken, updateUserToken] = useState(token$.value);\r\n  const [files, updateFiles] = useState([]); //antingen måste vi skicka ner denna staten som prop eller store. Alla api-anrop behöver state\r\n\r\n  function callback(files) {\r\n    //måste använda en callback för att uppdatera filerna. annars får vi fel pga updatefiles körs innan den fått en response från api:et\r\n    updateFiles(files);\r\n  }\r\n\r\n  useEffect(() => {\r\n    // håller koll på om url:n har bytt adress, uppdaterar isåfall med nya filer för just den andressen\r\n    let subscriptionToken = token$.subscribe(token => {\r\n      updateUserToken(token);\r\n    });\r\n\r\n    const path =\r\n      props.location.pathname === \"/\" ? \"\" : props.location.pathname.slice(5);\r\n    updatePath(path);\r\n\r\n    getFiles(callback);\r\n    let interval = setInterval(() => getFiles(callback), 5000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n      subscriptionToken.unsubscribe();\r\n    };\r\n  }, [props.location.pathname]); //vad useEffect håller koll på\r\n\r\n  if (!userToken) {\r\n    return <Redirect to=\"/auth\" />; //om usertoken är false redirectas vi till inlognings sida.\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <main>\r\n        <Path />\r\n        <ItemList files={files} cb={callback} />\r\n        <AddItem cb={callback} />\r\n      </main>\r\n    </>\r\n  );\r\n}\r\nexport default Home;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useDebounce } from \"use-debounce\";\r\n\r\nimport { search } from \"../utils\";\r\nimport \"../css/Search.css\";\r\n\r\nfunction Search(props) {\r\n  const [query, updateQuery] = useState(\"\");\r\n  const [value] = useDebounce(query, 500);\r\n  const { cb } = props;\r\n\r\n  useEffect(() => {\r\n    search(cb, value);\r\n    let interval = setInterval(() => search(cb, value), 1000);\r\n\r\n    return () => {\r\n      clearInterval(interval);\r\n    };\r\n  }, [value]);\r\n\r\n  function handleChange(event) {\r\n    updateQuery(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <div className=\"search-bar\">\r\n      <input\r\n        className=\"search-bar__text-input\"\r\n        onChange={handleChange}\r\n        placeholder=\"Search\"\r\n        value={query}\r\n      />\r\n      <Link to=\"/\">\r\n        <button className=\"search-bar__clear-button\">&times;</button>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport Search from \"./Search\";\r\nimport ItemList from \"./ItemList\";\r\nimport { token$ } from \"../store/authToken\";\r\n\r\nfunction SearchView() {\r\n  const [userToken, updateUserToken] = useState(token$.value);\r\n  const [files, updateFiles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    let subscriptionToken = token$.subscribe(token => {\r\n      updateUserToken(token);\r\n    });\r\n\r\n    return () => {\r\n      subscriptionToken.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  if (!userToken) {\r\n    return <Redirect to=\"/auth\" />; //om usertoken är false redirectas vi till inlognings sida.\r\n  }\r\n  return (\r\n    <>\r\n      <Search cb={updateFiles} />\r\n      <ItemList files={files} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SearchView;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\n\r\nimport ItemList from \"./ItemList\";\r\nimport { favorite$ } from \"../store/favoriteStore\";\r\nimport { token$ } from \"../store/authToken\";\r\n\r\nfunction Favorites(props) {\r\n  const [userToken, updateUserToken] = useState(token$.value);\r\n  const [favorites, updateUserFavorite] = useState(favorite$.value);\r\n\r\n  useEffect(() => {\r\n    //här håller useEffect koll på våra filer. Den koller vilken sorts fil det är.\r\n    let subscription = favorite$.subscribe(favorite => {\r\n      updateUserFavorite(favorite);\r\n    });\r\n    let subscriptionToken = token$.subscribe(token => {\r\n      updateUserToken(token);\r\n    });\r\n\r\n    return () => {\r\n      subscriptionToken.unsubscribe();\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  if (!userToken) {\r\n    return <Redirect to=\"/auth\" />; //om usertoken är false redirectas vi till inlognings sida.\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>AmazingBox/Favorites</title>\r\n      </Helmet>\r\n      <ItemList files={favorites} />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Favorites;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nimport { token$, updateToken } from \"../store/authToken\";\r\nimport { parseQueryString } from \"../utils\";\r\n\r\nconst LoginDone = () => {\r\n  let [token, update] = useState(token$.value);\r\n\r\n  useEffect(() => {\r\n    let subscription = token$.subscribe(token => {\r\n      update(token);\r\n    });\r\n\r\n    updateToken(parseQueryString(window.location.hash).access_token);\r\n\r\n    return () => {\r\n      subscription.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  if (token) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <img\r\n        src=\"https://www.mktv.mx/wp-content/uploads/2017/07/letter_sending.gif\"\r\n        width={400}\r\n        alt=\"Dropbox Logo\"\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LoginDone;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { HashRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport Login from \"./components/Login\";\r\nimport Logout from \"./components/Logout\";\r\nimport Home from \"./components/Home\";\r\nimport SearchView from \"./components/SearchView\";\r\nimport Favorites from \"./components/Favorites\";\r\nimport LoginDone from \"./components/LoginDone\";\r\nimport { token$ } from \"../src/store/authToken\";\r\n\r\nfunction App() {\r\n  const [userToken, updateUserToken] = useState(token$.value);\r\n\r\n  useEffect(() => {\r\n    let subscriptionToken = token$.subscribe(token => {\r\n      updateUserToken(token);\r\n    });\r\n\r\n    return () => {\r\n      subscriptionToken.unsubscribe();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      <div className=\"App\">\r\n        {!userToken ? null : (\r\n          <header className=\"nav-header\">\r\n            <Helmet>\r\n              <title>AmazingBox</title>\r\n            </Helmet>\r\n            <Link className=\"home-icon material-icons\" to=\"/\">\r\n              home\r\n            </Link>\r\n            <Link className=\"favorites\" to=\"/favorites\">\r\n              <i className=\"favorites-icon material-icons\">star</i>{\" \"}\r\n              <span className=\"favorites-text\">Favorites</span>\r\n            </Link>\r\n            <Link className=\"search-icon material-icons\" to=\"/search\">\r\n              search\r\n            </Link>\r\n            <Logout />\r\n          </header>\r\n        )}\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route path=\"/home\" component={Home} />\r\n        <Route path=\"/favorites\" component={Favorites} />\r\n        <Route path=\"/search\" component={SearchView} />\r\n        <Route path=\"/auth\" component={Login} />\r\n        <Route path=\"/auth-done\" component={LoginDone} />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}